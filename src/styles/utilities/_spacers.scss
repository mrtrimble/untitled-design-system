@use 'sass:meta';
@use 'sass:string';
@use '../tokens/tokens' as tokens;

@each $spacer, $value in meta.module-variables('tokens') {
  $string: meta.inspect($spacer);

  @if string.index(meta.inspect($string), 'spacer') == 2 {
    $types: (
      'p': 'padding',
      'm': 'margin',
    );

    @layer theme {
      :root {
        --#{$spacer}: #{$value};
      }
    }

    @each $prefix, $typeProperty in $types {
      @layer utilities {
        .#{$prefix}-#{$spacer} {
          #{$typeProperty}: var(--#{$spacer});
        }

        $directions: (
          'x': 'inline',
          'y': 'block',
          'x-start': 'inline-start',
          'x-end': 'inline-end',
          'y-start': 'block-start',
          'y-end': 'block-end',
        );

        @each $direction, $property in $directions {
          .#{$prefix}#{$direction}-#{$spacer} {
            #{$typeProperty}-#{$property}: var(--#{$spacer});
          }
        }
      }
    }
  }
}
